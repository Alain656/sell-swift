<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SELL SWIFT - Business Dashboard</title>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Authentication Styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    
    body {
      background-color: #f8f9fa;
      color: #333;
      line-height: 1.6;
      padding: 0;
      margin: 0;
    }
    
    .auth-container {
      background: linear-gradient(135deg, #0055cc 0%, #0088ff 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }
    
    /* Particle Background */
    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 0;
    }
    
    /* Glass Morphism Background Elements */
    .glass-bg {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 0;
      opacity: 0;
      animation: fadeIn 1s ease forwards;
    }
    
    .bg-1 {
      width: 300px;
      height: 300px;
      top: -100px;
      left: -100px;
      animation-delay: 0.2s;
    }
    
    .bg-2 {
      width: 200px;
      height: 200px;
      bottom: -50px;
      right: -50px;
      animation-delay: 0.4s;
    }
    
    .bg-3 {
      width: 150px;
      height: 150px;
      top: 50%;
      right: 20%;
      animation-delay: 0.6s;
    }
    
    .auth-box {
      width: 100%;
      max-width: 1000px;
      display: flex;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      z-index: 1;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.8s ease 0.5s forwards;
    }
    
    .welcome-section {
      flex: 1;
      background: linear-gradient(135deg, rgba(0, 85, 204, 0.8) 0%, rgba(0, 136, 255, 0.8) 100%);
      color: white;
      padding: 60px 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateX(-20px);
      animation: fadeInLeft 0.8s ease 0.7s forwards;
    }
    
    .welcome-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
      background-size: cover;
      z-index: 0;
    }
    
    .welcome-section h1 {
      font-size: 36px;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }
    
    .welcome-section p {
      font-size: 18px;
      margin-bottom: 30px;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }
    
    .features {
      list-style: none;
      margin-top: 30px;
      position: relative;
      z-index: 1;
    }
    
    .features li {
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      opacity: 0;
      transform: translateX(-10px);
      animation: fadeInLeft 0.5s ease forwards;
    }
    
    .features li:nth-child(1) { animation-delay: 0.9s; }
    .features li:nth-child(2) { animation-delay: 1.0s; }
    .features li:nth-child(3) { animation-delay: 1.1s; }
    .features li:nth-child(4) { animation-delay: 1.2s; }
    .features li:nth-child(5) { animation-delay: 1.3s; }
    
    .features i {
      margin-right: 10px;
      font-size: 18px;
    }
    
    .auth-section {
      flex: 1;
      padding: 60px 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      opacity: 0;
      transform: translateX(20px);
      animation: fadeInRight 0.8s ease 0.7s forwards;
    }
    
    .logo {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.6s ease 0.9s forwards;
    }
    
    .logo-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, #0055cc 0%, #0088ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      box-shadow: 0 5px 15px rgba(0, 85, 204, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .logo-icon:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0, 85, 204, 0.4);
    }
    
    .logo-icon i {
      color: white;
      font-size: 24px;
    }
    
    .logo-text {
      font-size: 28px;
      font-weight: bold;
      background: linear-gradient(135deg, #0055cc 0%, #0088ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .auth-tabs {
      display: flex;
      margin-bottom: 30px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.6s ease 1.0s forwards;
    }
    
    .auth-tab {
      padding: 12px 20px;
      cursor: pointer;
      font-weight: 600;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      color: #666;
      position: relative;
      overflow: hidden;
    }
    
    .auth-tab::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: #0055cc;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    
    .auth-tab.active::after {
      transform: translateX(0);
    }
    
    .auth-tab.active {
      color: #0055cc;
    }
    
    .auth-form {
      display: none;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s ease forwards;
    }
    
    .auth-form.active {
      display: block;
      animation-delay: 0.2s;
    }
    
    .form-group {
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s ease forwards;
    }
    
    .form-group:nth-child(1) { animation-delay: 1.1s; }
    .form-group:nth-child(2) { animation-delay: 1.2s; }
    .form-group:nth-child(3) { animation-delay: 1.3s; }
    .form-group:nth-child(4) { animation-delay: 1.4s; }
    .form-group:nth-child(5) { animation-delay: 1.5s; }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #555;
    }
    
    .form-group input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }
    
    .form-group input:focus {
      border-color: #0055cc;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 85, 204, 0.1);
      background: rgba(255, 255, 255, 0.9);
      transform: translateY(-2px);
    }
    
    .password-input {
      position: relative;
    }
    
    .toggle-password {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #777;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .toggle-password:hover {
      color: #0055cc;
    }
    
    .remember-forgot {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s ease 1.6s forwards;
    }
    
    .remember-me {
      display: flex;
      align-items: center;
    }
    
    .remember-me input {
      margin-right: 8px;
    }
    
    .forgot-password {
      color: #0055cc;
      text-decoration: none;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .forgot-password:hover {
      text-decoration: underline;
      transform: translateY(-1px);
    }
    
    .btn {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s ease 1.7s forwards;
    }
    
    .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .btn:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #0055cc 0%, #0088ff 100%);
      color: white;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #0044aa 0%, #0077dd 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 85, 204, 0.3);
    }
    
    .terms {
      font-size: 14px;
      color: #777;
      text-align: center;
      margin-top: 20px;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.5s ease 2.0s forwards;
    }
    
    .terms a {
      color: #0055cc;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .terms a:hover {
      text-decoration: underline;
      transform: translateY(-1px);
    }

    /* Dashboard Styles */
    .dashboard {
      display: none;
    }

    .container {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      padding: 15px;
    }
    
    /* Header Styles */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 10px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .business-header {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .business-logo {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: #f0f0f0;
      overflow: hidden;
      border: 2px solid #0055cc;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }
    
    .business-logo:hover {
      transform: scale(1.05);
    }
    
    .business-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    
    .business-logo i {
      font-size: 20px;
      color: #0055cc;
    }
    
    .business-info h1 {
      font-size: 24px;
      color: #0055cc;
      margin-bottom: 5px;
    }
    
    .business-info p {
      font-size: 14px;
      color: #666;
    }
    
    /* Logout Button */
    .logout-btn {
      background-color: #dc3545;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .logout-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .logout-btn:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .logout-btn:hover {
      background-color: #c82333;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
    }
    
    /* Navigation Styles */
    .nav-tabs {
      display: flex;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 20px;
      overflow-x: auto;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.2s forwards;
    }
    
    .nav-tab {
      padding: 15px 25px;
      cursor: pointer;
      font-weight: 600;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
    }
    
    .nav-tab::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: #0055cc;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    
    .nav-tab.active::after {
      transform: translateX(0);
    }
    
    .nav-tab.active {
      color: #0055cc;
    }
    
    .nav-tab:hover:not(.active) {
      background-color: #f8f9fa;
    }
    
    /* Tab Content Styles */
    .tab-content {
      display: none;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s ease forwards;
    }
    
    .tab-content.active {
      display: block;
      animation-delay: 0.1s;
    }
    
    /* Stock Management Styles */
    .stock-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.3s forwards;
    }
    
    .add-product-btn {
      background-color: #0055cc;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .add-product-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .add-product-btn:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .add-product-btn:hover {
      background-color: #0044aa;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 85, 204, 0.3);
    }
    
    .stock-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.4s forwards;
    }
    
    .stock-table th,
    .stock-table td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    
    .stock-table th {
      background-color: #f8f9fa;
      font-weight: bold;
      color: #555;
    }
    
    .stock-table tr {
      transition: all 0.3s ease;
    }
    
    .stock-table tr:hover {
      background-color: #f8f9fa;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    
    .stock-actions {
      display: flex;
      gap: 10px;
    }
    
    .stock-actions button {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .stock-actions button::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .stock-actions button:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .edit-btn {
      background-color: #ffc107;
      color: #333;
    }
    
    .edit-btn:hover {
      background-color: #e0a800;
      transform: translateY(-2px);
      box-shadow: 0 2px 5px rgba(255, 193, 7, 0.3);
    }
    
    .delete-btn {
      background-color: #dc3545;
      color: white;
    }
    
    .delete-btn:hover {
      background-color: #c82333;
      transform: translateY(-2px);
      box-shadow: 0 2px 5px rgba(220, 53, 69, 0.3);
    }
    
    /* Overview Styles */
    .month-init {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      text-align: center;
      margin-bottom: 25px;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.3s forwards;
    }
    
    .month-init h2 {
      font-size: 24px;
      color: #0055cc;
      margin-bottom: 15px;
    }
    
    .month-init p {
      font-size: 16px;
      color: #666;
      margin-bottom: 25px;
    }
    
    .start-month-btn {
      background-color: #0055cc;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .start-month-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .start-month-btn:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .start-month-btn:hover {
      background-color: #0044aa;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 85, 204, 0.3);
    }
    
    .init-progress {
      margin-top: 20px;
      display: none;
    }
    
    .progress-bar {
      height: 10px;
      background-color: #f0f0f0;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 10px;
    }
    
    .progress-fill {
      height: 100%;
      background-color: #0055cc;
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .progress-text {
      font-size: 14px;
      color: #666;
    }
    
    /* Overview Header with Refresh Button */
    .overview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.3s forwards;
    }
    
    .refresh-btn {
      background-color: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .refresh-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .refresh-btn:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .refresh-btn:hover {
      background-color: #218838;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
    }
    
    .summary-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .summary-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }
    
    .summary-card.animate {
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .summary-card:nth-child(1) { animation-delay: 0.3s; }
    .summary-card:nth-child(2) { animation-delay: 0.4s; }
    .summary-card:nth-child(3) { animation-delay: 0.5s; }
    
    .summary-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .summary-card h3 {
      font-size: 16px;
      color: #666;
      margin-bottom: 10px;
    }
    
    .summary-card .value {
      font-size: 24px;
      font-weight: bold;
      color: #0055cc;
      margin-bottom: 5px;
    }
    
    .summary-card .change {
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }
    
    .change.positive {
      color: #4caf50;
    }
    
    .change.negative {
      color: #f44336;
    }
    
    .split-boxes {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .split-box {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }
    
    .split-box.animate {
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .split-box:nth-child(1) { animation-delay: 0.4s; }
    .split-box:nth-child(2) { animation-delay: 0.5s; }
    
    .split-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .split-box h3 {
      font-size: 18px;
      color: #0055cc;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .split-content {
      display: flex;
      justify-content: space-between;
    }
    
    .split-item {
      text-align: center;
      flex: 1;
    }
    
    .split-item .value {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .split-item .label {
      font-size: 14px;
      color: #666;
    }
    
    .chart-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
    }
    
    .chart-container.animate {
      animation: fadeInUp 0.6s ease forwards;
      animation-delay: 0.5s;
    }
    
    .chart-container h3 {
      font-size: 18px;
      color: #0055cc;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .chart-wrapper {
      position: relative;
      height: 300px;
    }
    
    .insights {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
    }
    
    .insights.animate {
      animation: fadeInUp 0.6s ease forwards;
      animation-delay: 0.6s;
    }
    
    .insights h3 {
      font-size: 18px;
      color: #0055cc;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .insight-card {
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
      background: #f8f9fa;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease;
    }
    
    .insight-card.animate {
      animation: fadeInUp 0.5s ease forwards;
    }
    
    .insight-card:nth-child(1) { animation-delay: 0.7s; }
    .insight-card:nth-child(2) { animation-delay: 0.8s; }
    .insight-card:nth-child(3) { animation-delay: 0.9s; }
    
    .insight-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .insight-card h4 {
      font-size: 16px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .insight-card p {
      font-size: 14px;
      color: #555;
    }
    
    .insight-positive {
      border-left: 4px solid #4caf50;
    }
    
    .insight-warning {
      border-left: 4px solid #ff9800;
    }
    
    .insight-critical {
      border-left: 4px solid #f44336;
    }
    
    .product-performance {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
    }
    
    .product-performance.animate {
      animation: fadeInUp 0.6s ease forwards;
      animation-delay: 0.7s;
    }
    
    .product-performance h3 {
      font-size: 18px;
      color: #0055cc;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .performance-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .performance-table th,
    .performance-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    
    .performance-table th {
      background-color: #f8f9fa;
      font-weight: bold;
      color: #555;
    }
    
    .performance-table tr {
      transition: all 0.3s ease;
    }
    
    .performance-table tr:hover {
      background-color: #f8f9fa;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    
    .profit-positive {
      color: #4caf50;
      font-weight: bold;
    }
    
    .profit-negative {
      color: #f44336;
      font-weight: bold;
    }
    
    /* Transactions Styles */
    .transactions-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.3s forwards;
    }
    
    .transaction-filters {
      display: flex;
      gap: 10px;
    }
    
    .transaction-filters select,
    .transaction-filters input {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      transition: all 0.3s;
    }
    
    .transaction-filters select:focus,
    .transaction-filters input:focus {
      border-color: #0055cc;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 85, 204, 0.1);
      transform: translateY(-2px);
    }
    
    .transaction-type {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }
    
    .transaction-sale {
      background-color: #e8f5e9;
      color: #2e7d32;
    }
    
    .transaction-expense {
      background-color: #ffebee;
      color: #c62828;
    }
    
    .transaction-loan {
      background-color: #e3f2fd;
      color: #1565c0;
    }
    
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .modal.show {
      display: flex;
      animation: fadeIn 0.3s ease forwards;
    }
    
    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      transform: translateY(-50px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .modal.show .modal-content {
      transform: translateY(0);
      opacity: 1;
      animation: slideInUp 0.4s ease forwards;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .modal-header h2 {
      color: #0055cc;
    }
    
    .close-modal {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
      transition: all 0.3s;
    }
    
    .close-modal:hover {
      color: #0055cc;
      transform: scale(1.1);
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      transition: all 0.3s;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #0055cc;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 85, 204, 0.1);
      transform: translateY(-2px);
    }
    
    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .btn:focus:not(:active)::after {
      animation: ripple 1s ease-out;
    }
    
    .btn-primary {
      background-color: #0055cc;
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #0044aa;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 85, 204, 0.3);
    }
    
    .btn-secondary {
      background-color: #6c757d;
      color: white;
    }
    
    .btn-secondary:hover {
      background-color: #5a6268;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3);
    }
    
    /* Footer */
    .footer {
      margin-top: 30px;
      text-align: center;
      padding: 20px 0;
      border-top: 1px solid #eee;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease 0.8s forwards;
    }
    
    .copyright {
      font-size: 14px;
      color: #666;
    }
    
    .copyright a {
      color: #0055cc;
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .copyright a:hover {
      text-decoration: underline;
      transform: translateY(-1px);
    }
    
    /* Receipt Modal Styles */
    .receipt-modal .modal-content {
      max-width: 400px;
      width: 90%;
    }

    .receipt {
      font-family: 'Courier New', monospace;
      background: white;
      padding: 20px;
      border: 1px dashed #ccc;
    }

    .receipt-header {
      text-align: center;
      margin-bottom: 20px;
      border-bottom: 1px solid #000;
      padding-bottom: 10px;
    }

    .receipt-header h3 {
      margin: 0;
      font-size: 18px;
    }

    .receipt-header p {
      margin: 5px 0;
      font-size: 12px;
    }

    .receipt-details {
      margin-bottom: 20px;
    }

    .receipt-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .receipt-total {
      border-top: 2px solid #000;
      padding-top: 10px;
      margin-top: 10px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
    }

    .receipt-footer {
      text-align: center;
      margin-top: 20px;
      font-size: 12px;
      border-top: 1px dashed #ccc;
      padding-top: 10px;
    }

    .receipt-actions {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .print-btn {
      background-color: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
    }

    .print-btn:hover {
      background-color: #218838;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .auth-box {
        flex-direction: column;
      }
      
      .welcome-section {
        padding: 40px 20px;
      }
      
      .auth-section {
        padding: 40px 20px;
      }
      
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .business-header {
        width: 100%;
        margin-bottom: 15px;
      }
      
      .nav-tabs {
        flex-wrap: wrap;
      }
      
      .nav-tab {
        flex: 1;
        text-align: center;
        min-width: 120px;
      }
      
      .stock-header,
      .transactions-header,
      .overview-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .transaction-filters {
        width: 100%;
        flex-wrap: wrap;
      }
      
      .transaction-filters select,
      .transaction-filters input {
        flex: 1;
        min-width: 120px;
      }

      .receipt-modal .modal-content {
        width: 95%;
        max-width: 350px;
      }
    }
    
    /* Loading and Notification Styles */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }
    
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #0055cc;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #333;
      color: white;
      padding: 12px 20px;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1001;
      display: none;
      max-width: 90%;
      text-align: center;
      opacity: 0;
      transform: translate(-50%, 20px);
      transition: all 0.3s ease;
    }
    
    .notification.show {
      display: block;
      animation: fadeInUp 0.4s ease forwards;
    }
    
    .notification.success { background-color: #4CAF50;}
    .notification.error { background-color: #f44336;}
    .notification.info { background-color: #2196F3;}
    
    /* Animation Keyframes */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0, 0);
        opacity: 0.5;
      }
      20% {
        transform: scale(25, 25);
        opacity: 0.3;
      }
      100% {
        opacity: 0;
        transform: scale(40, 40);
      }
    }
    
    /* Chart Animation */
    .chart-wrapper canvas {
      opacity: 0;
      transform: scale(0.9);
      animation: chartFadeIn 0.8s ease 0.5s forwards;
    }
    
    @keyframes chartFadeIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>
<body>
  <!-- Authentication Section -->
  <div class="auth-container" id="authContainer">
    <!-- Particle Background -->
    <div id="particles-js"></div>
    
    <!-- Glass Morphism Background Elements -->
    <div class="glass-bg bg-1"></div>
    <div class="glass-bg bg-2"></div>
    <div class="glass-bg bg-3"></div>
    
    <div class="auth-box">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <h1>Welcome to SELL SWIFT</h1>
        <p>Streamline your business operations with our comprehensive inventory and sales management platform.</p>
        
        <ul class="features">
          <li><i class="fas fa-chart-line"></i> Real-time Business Analytics</li>
          <li><i class="fas fa-boxes"></i> Efficient Stock Management</li>
          <li><i class="fas fa-money-bill-wave"></i> Sales & Revenue Tracking</li>
          <li><i class="fas fa-brain"></i> AI-Powered Insights</li>
          <li><i class="fas fa-mobile-alt"></i> Responsive Design</li>
        </ul>
      </div>
      
      <!-- Authentication Section -->
      <div class="auth-section">
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-store"></i>
          </div>
          <div class="logo-text">SELL SWIFT</div>
        </div>
        
        <div class="auth-tabs">
          <div class="auth-tab active" data-tab="login">Login</div>
          <div class="auth-tab" data-tab="signup">Sign Up</div>
        </div>
        
        <!-- Login Form -->
        <form class="auth-form active" id="loginForm">
          <div class="form-group">
            <label for="loginEmail">Email Address</label>
            <input type="email" id="loginEmail" required>
          </div>
          
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <div class="password-input">
              <input type="password" id="loginPassword" required>
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="remember-forgot">
            <div class="remember-me">
              <input type="checkbox" id="rememberMe">
              <label for="rememberMe">Remember me</label>
            </div>
            <a href="#" class="forgot-password">Forgot Password?</a>
          </div>
          
          <button type="submit" class="btn btn-primary" id="loginBtn">Login</button>
          
          <p class="terms">
            By continuing, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.
          </p>
        </form>
        
        <!-- Sign Up Form -->
        <form class="auth-form" id="signupForm">
          <div class="form-group">
            <label for="signupName">Full Name</label>
            <input type="text" id="signupName" required>
          </div>
          
          <div class="form-group">
            <label for="signupEmail">Email Address</label>
            <input type="email" id="signupEmail" required>
          </div>
          
          <div class="form-group">
            <label for="signupPassword">Password</label>
            <div class="password-input">
              <input type="password" id="signupPassword" required>
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="form-group">
            <label for="confirmPassword">Confirm Password</label>
            <div class="password-input">
              <input type="password" id="confirmPassword" required>
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          
          <div class="form-group">
            <label for="businessName">Business Name</label>
            <input type="text" id="businessName" required>
          </div>
          
          <button type="submit" class="btn btn-primary" id="signupBtn">Create Account</button>
          
          <p class="terms">
            By creating an account, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.
          </p>
        </form>
      </div>
    </div>
  </div>

  <!-- Dashboard Section -->
  <div class="dashboard" id="dashboard">
    <div class="container">
      <!-- Header -->
      <div class="header">
        <div class="business-header">
          <div class="business-logo" id="businessLogo">
            <i class="fas fa-store"></i>
            <img src="" alt="Business Logo">
          </div>
          <div class="business-info">
            <h1 id="businessName">SELL SWIFT</h1>
            <p id="currentMonth">Month: Loading...</p>
          </div>
        </div>
        <div class="header-right">
          <button class="logout-btn" id="dashboardLogoutBtn">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        </div>
      </div>
      
      <!-- Navigation Tabs -->
      <div class="nav-tabs">
        <div class="nav-tab active" data-tab="stock">Stock Management</div>
        <div class="nav-tab" data-tab="overview">Business Overview</div>
        <div class="nav-tab" data-tab="transactions">Transactions</div>
      </div>
      
      <!-- Stock Management Tab -->
      <div class="tab-content active" id="stock-tab">
        <div class="stock-header">
          <h2>Product Inventory</h2>
          <button class="add-product-btn" id="addProductBtn">
            <i class="fas fa-plus"></i> Add Product
          </button>
        </div>
        
        <table class="stock-table">
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Category</th>
              <th>Quantity</th>
              <th>Cost Price</th>
              <th>Selling Price</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="stockTableBody">
            <!-- Stock data will be populated here -->
            <tr>
              <td colspan="7" style="text-align: center; padding: 30px;">
                No products added yet. Click "Add Product" to get started.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Overview Tab -->
      <div class="tab-content" id="overview-tab">
        <!-- Month Initialization (shown when no data exists) -->
        <div class="month-init" id="monthInit">
          <h2>Start Tracking Your Business</h2>
          <p>Initialize your monthly analytics to start tracking performance, revenue, and growth opportunities.</p>
          <button class="start-month-btn" id="startMonthBtn">Start the Month</button>
          <div class="init-progress" id="initProgress">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Checking business...</div>
          </div>
        </div>
        
        <!-- Dashboard Content (hidden initially) -->
        <div id="dashboardContent" style="display: none;">
          <!-- Overview Header with Refresh Button -->
          <div class="overview-header">
            <h2>Business Overview</h2>
            <button class="refresh-btn" id="refreshOverviewBtn">
              <i class="fas fa-sync-alt"></i> Refresh Overview
            </button>
          </div>
          
          <!-- Summary Cards -->
          <div class="summary-cards">
            <div class="summary-card">
              <h3>Total Revenue</h3>
              <div class="value" id="totalRevenue">RWF 0</div>
              <div class="change" id="revenueChange">0% <i class="fas fa-caret-right"></i></div>
            </div>
            <div class="summary-card">
              <h3>Total Profit</h3>
              <div class="value" id="totalProfit">RWF 0</div>
              <div class="change" id="profitChange">0% <i class="fas fa-caret-right"></i></div>
            </div>
            <div class="summary-card">
              <h3>Total Loss</h3>
              <div class="value" id="totalLoss">RWF 0</div>
              <div class="change" id="lossChange">0% <i class="fas fa-caret-right"></i></div>
            </div>
          </div>
          
          <!-- Split Boxes -->
          <div class="split-boxes">
            <div class="split-box">
              <h3>Products</h3>
              <div class="split-content">
                <div class="split-item">
                  <div class="value" id="soldProducts">0</div>
                  <div class="label">Sold</div>
                </div>
                <div class="split-item">
                  <div class="value" id="unsoldProducts">0</div>
                  <div class="label">Unsold</div>
                </div>
              </div>
            </div>
            <div class="split-box">
              <h3>Loans</h3>
              <div class="split-content">
                <div class="split-item">
                  <div class="value" id="activeLoans">0</div>
                  <div class="label">Active</div>
                </div>
                <div class="split-item">
                  <div class="value" id="paidLoans">0</div>
                  <div class="label">Paid</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- General Revenue Chart -->
          <div class="chart-container">
            <h3>Daily Revenue & Loss</h3>
            <div class="chart-wrapper">
              <canvas id="revenueChart"></canvas>
            </div>
          </div>
          
          <!-- AI Insights -->
          <div class="insights">
            <h3><i class="fas fa-brain"></i> AI-Powered Business Insights</h3>
            <div id="insightsContainer">
              <div class="insight-card insight-warning">
                <h4><i class="fas fa-exclamation-triangle"></i> Insufficient Data</h4>
                <p>We need more business data to generate meaningful insights. Continue using SELL SWIFT to track sales, products, and loans for personalized recommendations.</p>
              </div>
            </div>
          </div>
          
          <!-- Product Performance -->
          <div class="product-performance">
            <h3><i class="fas fa-chart-line"></i> Product Performance</h3>
            <div class="table-responsive">
              <table class="performance-table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Units Sold</th>
                    <th>Revenue</th>
                    <th>Cost</th>
                    <th>Profit</th>
                    <th>Profit Margin</th>
                  </tr>
                </thead>
                <tbody id="productPerformanceBody">
                  <tr>
                    <td colspan="6" style="text-align: center;">No product data available yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Transactions Tab -->
      <div class="tab-content" id="transactions-tab">
        <div class="transactions-header">
          <h2>All Transactions</h2>
          <div class="transaction-filters">
            <select id="transactionTypeFilter">
              <option value="all">All Types</option>
              <option value="sale">Sales</option>
              <option value="expense">Expenses</option>
              <option value="loan">Loans</option>
            </select>
            <input type="date" id="transactionDateFilter">
            <button class="add-product-btn" id="addTransactionBtn">
              <i class="fas fa-plus"></i> Add Transaction
            </button>
          </div>
        </div>
        
        <table class="stock-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Type</th>
              <th>Product</th>
              <th>Quantity</th>
              <th>Amount</th>
              <th>Profit</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="transactionsTableBody">
            <tr>
              <td colspan="8" style="text-align: center; padding: 30px;">
                No transactions found. Click "Add Transaction" to get started.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Footer -->
      <div class="footer">
        <p class="copyright">
          SELL SWIFT  2025 D.A.Bruce - 
          <a href="terms.html">Terms</a>
        </p>
      </div>
      
      <!-- Add Product Modal -->
      <div class="modal" id="productModal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="productModalTitle">Add New Product</h2>
            <button class="close-modal">&times;</button>
          </div>
          <form id="productForm">
            <div class="form-group">
              <label for="productName">Product Name</label>
              <input type="text" id="productName" required>
            </div>
            <div class="form-group">
              <label for="productCategory">Category</label>
              <select id="productCategory" required>
                <option value="">Select Category</option>
                <option value="electronics">Electronics</option>
                <option value="clothing">Clothing</option>
                <option value="food">Food & Beverages</option>
                <option value="home">Home & Garden</option>
                <option value="construction">Construction Materials</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="productQuantity">Quantity</label>
              <input type="number" id="productQuantity" min="0" required>
            </div>
            <div class="form-group">
              <label for="costPrice">Cost Price (RWF)</label>
              <input type="number" id="costPrice" min="0" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="sellingPrice">Selling Price (RWF)</label>
              <input type="number" id="sellingPrice" min="0" step="0.01" required>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-secondary close-modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Save Product</button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Add Transaction Modal -->
      <div class="modal" id="transactionModal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="transactionModalTitle">Add New Transaction</h2>
            <button class="close-modal">&times;</button>
          </div>
          <form id="transactionForm">
            <div class="form-group">
              <label for="transactionType">Transaction Type</label>
              <select id="transactionType" required>
                <option value="">Select Type</option>
                <option value="sale">Sale</option>
                <option value="expense">Expense</option>
                <option value="loan">Loan</option>
              </select>
            </div>
            <div class="form-group">
              <label for="transactionDate">Date</label>
              <input type="date" id="transactionDate" required>
            </div>
            <div class="form-group" id="productSelectGroup" style="display: none;">
              <label for="transactionProduct">Product</label>
              <select id="transactionProduct">
                <!-- Products will be populated here -->
              </select>
            </div>
            <div class="form-group" id="quantitySelectGroup" style="display: none;">
              <label for="transactionQuantity">Quantity Sold</label>
              <input type="number" id="transactionQuantity" min="1" value="1">
            </div>
            <div class="form-group" id="unitPriceGroup" style="display: none;">
              <label for="unitPrice">Unit Price (RWF)</label>
              <input type="number" id="unitPrice" min="0" step="0.01">
            </div>
            <div class="form-group" id="amountGroup">
              <label for="transactionAmount">Amount (RWF)</label>
              <input type="number" id="transactionAmount" min="0" step="0.01" required>
            </div>
            <div class="form-group" id="loanStatusGroup" style="display: none;">
              <label for="loanStatus">Loan Status</label>
              <select id="loanStatus">
                <option value="active">Active</option>
                <option value="paid">Paid</option>
              </select>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-secondary close-modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Save Transaction</button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Receipt Modal -->
      <div class="modal receipt-modal" id="receiptModal">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Sale Receipt</h2>
            <button class="close-modal">&times;</button>
          </div>
          <div class="receipt" id="receiptContent">
            <div class="receipt-header">
              <h3 id="receiptBusinessName">SELL SWIFT</h3>
              <p id="receiptAddress">Business Address</p>
              <p id="receiptPhone">Phone: +250 7XX XXX XXX</p>
              <p id="receiptDate">Date: Loading...</p>
              <p id="receiptReceiptNo">Receipt #: Loading...</p>
            </div>
            
            <div class="receipt-details">
              <div class="receipt-item">
                <span>Product:</span>
                <span id="receiptProductName">-</span>
              </div>
              <div class="receipt-item">
                <span>Quantity:</span>
                <span id="receiptQuantity">-</span>
              </div>
              <div class="receipt-item">
                <span>Unit Price:</span>
                <span id="receiptUnitPrice">-</span>
              </div>
              <div class="receipt-item">
                <span>Subtotal:</span>
                <span id="receiptSubtotal">-</span>
              </div>
              <div class="receipt-total">
                <span>TOTAL:</span>
                <span id="receiptTotal">-</span>
              </div>
            </div>
            
            <div class="receipt-footer">
              <p>Thank you for your purchase!</p>
              <p>Please keep this receipt for your records</p>
            </div>
          </div>
          
          <div class="receipt-actions">
            <button type="button" class="btn btn-secondary close-modal">Close</button>
            <button type="button" class="btn print-btn" id="printReceiptBtn">
              <i class="fas fa-print"></i> Print Receipt
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Notification Popup -->
  <div class="notification" id="notification"></div>

  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
    import { 
      getAuth, 
      createUserWithEmailAndPassword, 
      signInWithEmailAndPassword,
      sendPasswordResetEmail,
      updateProfile,
      signOut,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyANgMpZmQxx6MYAFXx4x7dNZp0lr2vcleM",
      authDomain: "sell-swift.firebaseapp.com",
      projectId: "sell-swift",
      storageBucket: "sell-swift.firebasestorage.app",
      messagingSenderId: "299016711669",
      appId: "1:299016711669:web:dbc08e821302ccda9b44bc",
      measurementId: "G-YMDCP4KWD5"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // DOM Elements
    const authContainer = document.getElementById('authContainer');
    const dashboard = document.getElementById('dashboard');
    
    // Authentication elements
    const authTabs = document.querySelectorAll('.auth-tab');
    const authForms = document.querySelectorAll('.auth-form');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const loginBtn = document.getElementById('loginBtn');
    const signupBtn = document.getElementById('signupBtn');
    const togglePasswordButtons = document.querySelectorAll('.toggle-password');
    const notification = document.getElementById('notification');
    const forgotPasswordLink = document.querySelector('.forgot-password');
    
    // Dashboard elements
    const dashboardLogoutBtn = document.getElementById('dashboardLogoutBtn');
    const businessNameElement = document.getElementById('businessName');
    const currentMonthElement = document.getElementById('currentMonth');
    
    // Tab navigation
    const navTabs = document.querySelectorAll('.nav-tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    // Stock management
    const addProductBtn = document.getElementById('addProductBtn');
    const stockTableBody = document.getElementById('stockTableBody');
    const productModal = document.getElementById('productModal');
    const productForm = document.getElementById('productForm');
    
    // Transactions
    const addTransactionBtn = document.getElementById('addTransactionBtn');
    const transactionsTableBody = document.getElementById('transactionsTableBody');
    const transactionModal = document.getElementById('transactionModal');
    const transactionForm = document.getElementById('transactionForm');
    const transactionTypeFilter = document.getElementById('transactionTypeFilter');
    const transactionDateFilter = document.getElementById('transactionDateFilter');
    
    // Overview elements
    const monthInitSection = document.getElementById('monthInit');
    const startMonthBtn = document.getElementById('startMonthBtn');
    const initProgressSection = document.getElementById('initProgress');
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    const dashboardContent = document.getElementById('dashboardContent');
    const refreshOverviewBtn = document.getElementById('refreshOverviewBtn');
    
    // Summary elements
    const totalRevenueElement = document.getElementById('totalRevenue');
    const totalProfitElement = document.getElementById('totalProfit');
    const totalLossElement = document.getElementById('totalLoss');
    const revenueChangeElement = document.getElementById('revenueChange');
    const profitChangeElement = document.getElementById('profitChange');
    const lossChangeElement = document.getElementById('lossChange');
    const soldProductsElement = document.getElementById('soldProducts');
    const unsoldProductsElement = document.getElementById('unsoldProducts');
    const activeLoansElement = document.getElementById('activeLoans');
    const paidLoansElement = document.getElementById('paidLoans');
    
    // Other elements
    const insightsContainer = document.getElementById('insightsContainer');
    const productPerformanceBody = document.getElementById('productPerformanceBody');
    
    // Receipt elements
    const receiptModal = document.getElementById('receiptModal');
    const receiptContent = document.getElementById('receiptContent');
    const receiptBusinessName = document.getElementById('receiptBusinessName');
    const receiptAddress = document.getElementById('receiptAddress');
    const receiptPhone = document.getElementById('receiptPhone');
    const receiptDate = document.getElementById('receiptDate');
    const receiptReceiptNo = document.getElementById('receiptReceiptNo');
    const receiptProductName = document.getElementById('receiptProductName');
    const receiptQuantity = document.getElementById('receiptQuantity');
    const receiptUnitPrice = document.getElementById('receiptUnitPrice');
    const receiptSubtotal = document.getElementById('receiptSubtotal');
    const receiptTotal = document.getElementById('receiptTotal');
    const printReceiptBtn = document.getElementById('printReceiptBtn');
    
    // Modal elements
    const closeModalButtons = document.querySelectorAll('.close-modal');
    const transactionTypeSelect = document.getElementById('transactionType');
    const productSelectGroup = document.getElementById('productSelectGroup');
    const quantitySelectGroup = document.getElementById('quantitySelectGroup');
    const unitPriceGroup = document.getElementById('unitPriceGroup');
    const amountGroup = document.getElementById('amountGroup');
    const loanStatusGroup = document.getElementById('loanStatusGroup');
    
    // Chart instances
    let revenueChart = null;
    
    // Global state
    let businessData = null;
    let products = [];
    let transactions = [];
    let analyticsData = {
      sales: [],
      products: [],
      loans: [],
      timeRange: 30
    };
    let editingProductId = null;
    let editingTransactionId = null;
    let monthInitialized = false;

    // Show notification
    function showNotification(message, type = 'info') {
      notification.textContent = message;
      notification.className = `notification ${type}`;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 4000);
    }

    // Set loading state for buttons
    function setLoading(button, isLoading) {
      if (isLoading) {
        button.disabled = true;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
      } else {
        button.disabled = false;
        if (button.id === 'loginBtn') {
          button.textContent = 'Login';
        } else {
          button.textContent = 'Create Account';
        }
      }
    }

    // Switch between login and signup tabs
    authTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabId = tab.getAttribute('data-tab');
        
        // Update active tab
        authTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Show active form
        authForms.forEach(form => {
          form.classList.remove('active');
          if (form.id === `${tabId}Form`) {
            form.classList.add('active');
          }
        });
      });
    });

    // Toggle password visibility
    togglePasswordButtons.forEach(button => {
      button.addEventListener('click', () => {
        const input = button.parentElement.querySelector('input');
        const icon = button.querySelector('i');
        
        if (input.type === 'password') {
          input.type = 'text';
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          input.type = 'password';
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      });
    });

    // Login with email and password
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showNotification('Please fill in all fields', 'error');
        return;
      }
      
      setLoading(loginBtn, true);
      
      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;
        
        showNotification('Login successful!', 'success');
        
        // Store user data in localStorage
        localStorage.setItem('sellSwiftUser', JSON.stringify({
          uid: user.uid,
          email: user.email,
          displayName: user.displayName
        }));
        
        // Show dashboard
        showDashboard();
        
      } catch (error) {
        console.error('Login error:', error);
        let errorMessage = 'Login failed. Please try again.';
        
        if (error.code === 'auth/invalid-email') {
          errorMessage = 'Invalid email address.';
        } else if (error.code === 'auth/user-disabled') {
          errorMessage = 'This account has been disabled.';
        } else if (error.code === 'auth/user-not-found') {
          errorMessage = 'No account found with this email.';
        } else if (error.code === 'auth/wrong-password') {
          errorMessage = 'Incorrect password.';
        }
        
        showNotification(errorMessage, 'error');
      } finally {
        setLoading(loginBtn, false);
      }
    });

    // Sign up with email and password
    signupForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const businessName = document.getElementById('businessName').value;
      
      // Validation
      if (!name || !email || !password || !confirmPassword || !businessName) {
        showNotification('Please fill in all fields', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        showNotification('Passwords do not match', 'error');
        return;
      }
      
      if (password.length < 6) {
        showNotification('Password must be at least 6 characters', 'error');
        return;
      }
      
      setLoading(signupBtn, true);
      
      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;
        
        // Update user profile with name
        await updateProfile(user, {
          displayName: name
        });
        
        // Store user data in localStorage
        localStorage.setItem('sellSwiftUser', JSON.stringify({
          uid: user.uid,
          email: user.email,
          displayName: name,
          businessName: businessName
        }));
        
        // Initialize user data in localStorage
        localStorage.setItem('sellSwiftProducts', JSON.stringify([]));
        localStorage.setItem('sellSwiftTransactions', JSON.stringify([]));
        
        showNotification('Account created successfully!', 'success');
        
        // Show dashboard
        showDashboard();
        
      } catch (error) {
        console.error('Signup error:', error);
        let errorMessage = 'Signup failed. Please try again.';
        
        if (error.code === 'auth/email-already-in-use') {
          errorMessage = 'An account with this email already exists.';
        } else if (error.code === 'auth/invalid-email') {
          errorMessage = 'Invalid email address.';
        } else if (error.code === 'auth/weak-password') {
          errorMessage = 'Password is too weak.';
        }
        
        showNotification(errorMessage, 'error');
      } finally {
        setLoading(signupBtn, false);
      }
    });

    // Forgot Password
    forgotPasswordLink.addEventListener('click', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('loginEmail').value;
      
      if (!email) {
        showNotification('Please enter your email address first', 'error');
        return;
      }
      
      try {
        await sendPasswordResetEmail(auth, email);
        showNotification('Password reset email sent! Check your inbox.', 'success');
      } catch (error) {
        console.error('Password reset error:', error);
        showNotification('Failed to send reset email. Please try again.', 'error');
      }
    });

    // Show dashboard
    function showDashboard() {
      authContainer.style.display = 'none';
      dashboard.style.display = 'block';
      initializeDashboard();
    }

    // Show login
    function showLogin() {
      dashboard.style.display = 'none';
      authContainer.style.display = 'flex';
      // Reset forms
      loginForm.reset();
      signupForm.reset();
    }

    // Logout functionality
    dashboardLogoutBtn.addEventListener('click', async () => {
      try {
        await signOut(auth);
        localStorage.removeItem('sellSwiftUser');
        showLogin();
        showNotification('Logged out successfully', 'success');
      } catch (error) {
        console.error('Logout error:', error);
        showNotification('Error during logout', 'error');
      }
    });

    // Check authentication state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in, show dashboard
        showDashboard();
      } else {
        // User is signed out, show login
        showLogin();
      }
    });

    // Dashboard functionality
    function initializeDashboard() {
      // Set business name
      const userData = JSON.parse(localStorage.getItem('sellSwiftUser') || '{}');
      businessNameElement.textContent = userData.businessName || "SELL SWIFT";
      
      // Set current month
      const currentDate = new Date();
      currentMonthElement.textContent = `Month: ${getMonthName(currentDate.getMonth())} ${currentDate.getFullYear()}`;
      
      // Load data from localStorage
      loadProducts();
      loadTransactions();
      
      // Set up event listeners
      setupDashboardEventListeners();
      
      // Initialize the overview tab
      checkMonthInitialization();
      
      // Animate dashboard elements
      animateDashboardElements();
    }
    
    function setupDashboardEventListeners() {
      // Tab navigation
      navTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.getAttribute('data-tab');
          switchTab(tabId);
        });
      });
      
      // Product modal
      addProductBtn.addEventListener('click', () => {
        openProductModal();
      });
      
      // Transaction modal
      addTransactionBtn.addEventListener('click', () => {
        openTransactionModal();
      });
      
      // Close modals
      closeModalButtons.forEach(button => {
        button.addEventListener('click', () => {
          closeModals();
        });
      });
      
      // Product form submission
      productForm.addEventListener('submit', (e) => {
        e.preventDefault();
        saveProduct();
      });
      
      // Transaction form submission
      transactionForm.addEventListener('submit', (e) => {
        e.preventDefault();
        saveTransaction();
      });
      
      // Transaction type change
      transactionTypeSelect.addEventListener('change', () => {
        updateTransactionForm();
      });
      
      // Product selection change for sales
      document.getElementById('transactionProduct').addEventListener('change', () => {
        updateSalePrice();
      });
      
      // Quantity or unit price change for sales
      document.getElementById('transactionQuantity').addEventListener('input', () => {
        updateSaleAmount();
      });
      document.getElementById('unitPrice').addEventListener('input', () => {
        updateSaleAmount();
      });
      
      // Transaction filters
      transactionTypeFilter.addEventListener('change', filterTransactions);
      transactionDateFilter.addEventListener('change', filterTransactions);
      
      // Overview functionality
      startMonthBtn.addEventListener('click', initializeMonth);
      
      // Refresh overview button
      refreshOverviewBtn.addEventListener('click', () => {
        refreshOverview();
      });
      
      // Print receipt button
      printReceiptBtn.addEventListener('click', printReceipt);
      
      // Click outside modal to close
      window.addEventListener('click', (e) => {
        if (e.target === productModal) {
          closeModals();
        }
        if (e.target === transactionModal) {
          closeModals();
        }
        if (e.target === receiptModal) {
          closeModals();
        }
      });
    }
    
    function switchTab(tabId) {
      // Update active tab
      navTabs.forEach(tab => {
        if (tab.getAttribute('data-tab') === tabId) {
          tab.classList.add('active');
        } else {
          tab.classList.remove('active');
        }
      });
      
      // Show active content
      tabContents.forEach(content => {
        if (content.id === `${tabId}-tab`) {
          content.classList.add('active');
        } else {
          content.classList.remove('active');
        }
      });
      
      // Animate elements in the new tab
      animateDashboardElements();
    }
    
    // Product Functions
    function loadProducts() {
      // Try to load from localStorage first
      const storedProducts = localStorage.getItem('sellSwiftProducts');
      if (storedProducts) {
        products = JSON.parse(storedProducts);
      } else {
        products = [];
      }
      renderProducts();
    }
    
    function saveProducts() {
      // Save to localStorage
      localStorage.setItem('sellSwiftProducts', JSON.stringify(products));
    }
    
    function renderProducts() {
      stockTableBody.innerHTML = '';
      
      if (products.length === 0) {
        stockTableBody.innerHTML = `
          <tr>
            <td colspan="7" style="text-align: center; padding: 30px;">
              No products added yet. Click "Add Product" to get started.
            </td>
          </tr>
        `;
        return;
      }
      
      products.forEach((product, index) => {
        const status = product.quantity > 0 ? 'In Stock' : 'Out of Stock';
        const statusClass = product.quantity > 0 ? 'profit-positive' : 'profit-negative';
        
        const row = document.createElement('tr');
        row.style.opacity = '0';
        row.style.transform = 'translateY(10px)';
        row.style.animation = `fadeInUp 0.5s ease ${index * 0.1}s forwards`;
        
        row.innerHTML = `
          <td>${product.name}</td>
          <td>${product.category}</td>
          <td>${product.quantity}</td>
          <td>RWF ${formatNumber(product.costPrice)}</td>
          <td>RWF ${formatNumber(product.sellingPrice)}</td>
          <td class="${statusClass}">${status}</td>
          <td>
            <div class="stock-actions">
              <button class="edit-btn" data-id="${product.id}">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="delete-btn" data-id="${product.id}">
                <i class="fas fa-trash"></i> Delete
              </button>
            </div>
          </td>
        `;
        
        stockTableBody.appendChild(row);
      });
      
      // Add event listeners to edit and delete buttons
      document.querySelectorAll('.edit-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const productId = e.currentTarget.getAttribute('data-id');
          editProduct(productId);
        });
      });
      
      document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const productId = e.currentTarget.getAttribute('data-id');
          deleteProduct(productId);
        });
      });
    }
    
    function openProductModal(product = null) {
      editingProductId = product ? product.id : null;
      
      const modalTitle = document.getElementById('productModalTitle');
      modalTitle.textContent = product ? 'Edit Product' : 'Add New Product';
      
      if (product) {
        document.getElementById('productName').value = product.name;
        document.getElementById('productCategory').value = product.category;
        document.getElementById('productQuantity').value = product.quantity;
        document.getElementById('costPrice').value = product.costPrice;
        document.getElementById('sellingPrice').value = product.sellingPrice;
      } else {
        productForm.reset();
      }
      
      productModal.classList.add('show');
    }
    
    function saveProduct() {
      // Get form values
      const productName = document.getElementById('productName').value;
      const productCategory = document.getElementById('productCategory').value;
      const productQuantity = parseInt(document.getElementById('productQuantity').value);
      const costPrice = parseFloat(document.getElementById('costPrice').value);
      const sellingPrice = parseFloat(document.getElementById('sellingPrice').value);
      
      // Validate required fields
      if (!productName || !productCategory || isNaN(productQuantity) || isNaN(costPrice) || isNaN(sellingPrice)) {
        showNotification('Please fill in all required fields', 'error');
        return;
      }
      
      // Check if product with same name already exists (for new products only)
      if (!editingProductId) {
        const existingProduct = products.find(p => 
          p.name.toLowerCase() === productName.toLowerCase() && p.category === productCategory
        );
        
        if (existingProduct) {
          showNotification('A product with this name and category already exists!', 'error');
          return;
        }
      }
      
      // Create product data
      const productData = {
        id: editingProductId || Date.now().toString(),
        name: productName,
        category: productCategory,
        quantity: productQuantity,
        costPrice: costPrice,
        sellingPrice: sellingPrice,
        createdAt: new Date().toISOString()
      };
      
      try {
        if (editingProductId) {
          // Update existing product
          const index = products.findIndex(p => p.id === editingProductId);
          if (index !== -1) {
            products[index] = productData;
          }
          showNotification('Product updated successfully!', 'success');
        } else {
          // Add new product
          products.push(productData);
          showNotification('Product added successfully!', 'success');
        }
        
        // Save to localStorage and reload
        saveProducts();
        loadProducts();
        closeModals();
        
        // Refresh overview if it's active
        if (monthInitialized) {
          refreshOverview();
        }
      } catch (error) {
        console.error("Error saving product:", error);
        showNotification('Error saving product: ' + error.message, 'error');
      }
      
      // Reset editing ID
      editingProductId = null;
    }
    
    function editProduct(productId) {
      const product = products.find(p => p.id === productId);
      if (product) {
        openProductModal(product);
      }
    }
    
    function deleteProduct(productId) {
      if (confirm('Are you sure you want to delete this product?')) {
        try {
          products = products.filter(p => p.id !== productId);
          saveProducts();
          loadProducts();
          showNotification('Product deleted successfully!', 'success');
          
          // Refresh overview if it's active
          if (monthInitialized) {
            refreshOverview();
          }
        } catch (error) {
          console.error("Error deleting product:", error);
          showNotification('Error deleting product', 'error');
        }
      }
    }
    
    // Transaction Functions
    function loadTransactions() {
      // Try to load from localStorage first
      const storedTransactions = localStorage.getItem('sellSwiftTransactions');
      if (storedTransactions) {
        transactions = JSON.parse(storedTransactions);
      } else {
        transactions = [];
      }
      filterTransactions();
    }
    
    function saveTransactions() {
      // Save to localStorage
      localStorage.setItem('sellSwiftTransactions', JSON.stringify(transactions));
    }
    
    function renderTransactions(transactionsToRender) {
      transactionsTableBody.innerHTML = '';
      
      if (transactionsToRender.length === 0) {
        transactionsTableBody.innerHTML = `
          <tr>
            <td colspan="8" style="text-align: center; padding: 30px;">
              No transactions found. Click "Add Transaction" to get started.
            </td>
          </tr>
        `;
        return;
      }
      
      transactionsToRender.forEach((transaction, index) => {
        const typeClass = `transaction-${transaction.type}`;
        const formattedDate = new Date(transaction.date).toLocaleDateString();
        const product = products.find(p => p.id === transaction.productId);
        const productName = product ? product.name : 'N/A';
        const quantity = transaction.quantity || 'N/A';
        const profit = transaction.profit ? `RWF ${formatNumber(transaction.profit)}` : 'N/A';
        
        const row = document.createElement('tr');
        row.style.opacity = '0';
        row.style.transform = 'translateY(10px)';
        row.style.animation = `fadeInUp 0.5s ease ${index * 0.1}s forwards`;
        
        row.innerHTML = `
          <td>${formattedDate}</td>
          <td><span class="transaction-type ${typeClass}">${transaction.type.toUpperCase()}</span></td>
          <td>${productName}</td>
          <td>${quantity}</td>
          <td>RWF ${formatNumber(transaction.amount)}</td>
          <td>${profit}</td>
          <td>${transaction.status || 'N/A'}</td>
          <td>
            <div class="stock-actions">
              <button class="edit-btn" data-id="${transaction.id}">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="delete-btn" data-id="${transaction.id}">
                <i class="fas fa-trash"></i> Delete
              </button>
            </div>
          </td>
        `;
        
        transactionsTableBody.appendChild(row);
      });
      
      // Add event listeners to edit and delete buttons
      document.querySelectorAll('#transactionsTableBody .edit-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const transactionId = e.currentTarget.getAttribute('data-id');
          editTransaction(transactionId);
        });
      });
      
      document.querySelectorAll('#transactionsTableBody .delete-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const transactionId = e.currentTarget.getAttribute('data-id');
          deleteTransaction(transactionId);
        });
      });
    }
    
    function filterTransactions() {
      const typeFilter = transactionTypeFilter.value;
      const dateFilter = transactionDateFilter.value;
      
      let filteredTransactions = transactions;
      
      if (typeFilter !== 'all') {
        filteredTransactions = filteredTransactions.filter(t => t.type === typeFilter);
      }
      
      if (dateFilter) {
        filteredTransactions = filteredTransactions.filter(t => t.date === dateFilter);
      }
      
      renderTransactions(filteredTransactions);
    }
    
    function openTransactionModal(transaction = null) {
      editingTransactionId = transaction ? transaction.id : null;
      
      const modalTitle = document.getElementById('transactionModalTitle');
      modalTitle.textContent = transaction ? 'Edit Transaction' : 'Add New Transaction';
      
      // Populate product dropdown for sales
      const productSelect = document.getElementById('transactionProduct');
      productSelect.innerHTML = '<option value="">Select Product</option>';
      products.forEach(product => {
        const option = document.createElement('option');
        option.value = product.id;
        option.textContent = product.name;
        productSelect.appendChild(option);
      });
      
      if (transaction) {
        document.getElementById('transactionType').value = transaction.type;
        document.getElementById('transactionDate').value = transaction.date;
        document.getElementById('transactionAmount').value = transaction.amount;
        
        if (transaction.type === 'sale' && transaction.productId) {
          document.getElementById('transactionProduct').value = transaction.productId;
          document.getElementById('transactionQuantity').value = transaction.quantity || 1;
          document.getElementById('unitPrice').value = transaction.unitPrice || transaction.amount / (transaction.quantity || 1);
        }
        
        if (transaction.type === 'loan' && transaction.status) {
          document.getElementById('loanStatus').value = transaction.status;
        }
        
        updateTransactionForm();
      } else {
        transactionForm.reset();
        updateTransactionForm();
      }
      
      transactionModal.classList.add('show');
    }
    
    function updateTransactionForm() {
      const transactionType = document.getElementById('transactionType').value;
      
      // Show/hide product selection for sales
      if (transactionType === 'sale') {
        productSelectGroup.style.display = 'block';
        quantitySelectGroup.style.display = 'block';
        unitPriceGroup.style.display = 'block';
        amountGroup.style.display = 'none';
      } else {
        productSelectGroup.style.display = 'none';
        quantitySelectGroup.style.display = 'none';
        unitPriceGroup.style.display = 'none';
        amountGroup.style.display = 'block';
      }
      
      // Show/hide loan status for loans
      if (transactionType === 'loan') {
        loanStatusGroup.style.display = 'block';
      } else {
        loanStatusGroup.style.display = 'none';
      }
    }
    
    function updateSalePrice() {
      const productId = document.getElementById('transactionProduct').value;
      if (productId) {
        const product = products.find(p => p.id === productId);
        if (product) {
          document.getElementById('unitPrice').value = product.sellingPrice;
          updateSaleAmount();
        }
      }
    }
    
    function updateSaleAmount() {
      const quantity = parseInt(document.getElementById('transactionQuantity').value) || 0;
      const unitPrice = parseFloat(document.getElementById('unitPrice').value) || 0;
      const amount = quantity * unitPrice;
      document.getElementById('transactionAmount').value = amount.toFixed(2);
    }
    
    function saveTransaction() {
      const transactionType = document.getElementById('transactionType').value;
      const transactionData = {
        id: editingTransactionId || Date.now().toString(),
        type: transactionType,
        date: document.getElementById('transactionDate').value,
        amount: parseFloat(document.getElementById('transactionAmount').value),
        createdAt: new Date().toISOString()
      };
      
      // Add product ID, quantity, and unit price for sales
      if (transactionType === 'sale') {
        const productId = document.getElementById('transactionProduct').value;
        const quantity = parseInt(document.getElementById('transactionQuantity').value);
        const unitPrice = parseFloat(document.getElementById('unitPrice').value);
        
        if (!productId) {
          showNotification('Please select a product for this sale', 'error');
          return;
        }
        
        transactionData.productId = productId;
        transactionData.quantity = quantity;
        transactionData.unitPrice = unitPrice;
        
        // Calculate profit
        const product = products.find(p => p.id === productId);
        if (product) {
          if (product.quantity < quantity) {
            showNotification(`Not enough stock! Only ${product.quantity} ${product.name} available.`, 'error');
            return;
          }
          
          // Calculate profit based on cost price and selling price
          const cost = product.costPrice * quantity;
          const revenue = unitPrice * quantity;
          const profit = revenue - cost;
          
          transactionData.profit = profit;
          
          // Update the product quantity
          product.quantity -= quantity;
          saveProducts();
          loadProducts();
          
          // Generate receipt for this sale
          generateReceipt(transactionData, product);
        }
      }
      
      // Add status for loans
      if (transactionType === 'loan') {
        transactionData.status = document.getElementById('loanStatus').value;
      }
      
      try {
        if (editingTransactionId) {
          // Update existing transaction
          const index = transactions.findIndex(t => t.id === editingTransactionId);
          if (index !== -1) {
            transactions[index] = transactionData;
          }
          showNotification('Transaction updated successfully!', 'success');
        } else {
          // Add new transaction
          transactions.push(transactionData);
          showNotification('Transaction added successfully!', 'success');
        }
        
        // Save to localStorage and reload
        saveTransactions();
        loadTransactions();
        closeModals();
        
        // Refresh overview if it's active
        if (monthInitialized) {
          refreshOverview();
        }
      } catch (error) {
        console.error("Error saving transaction:", error);
        showNotification('Error saving transaction', 'error');
      }
      
      // Reset editing ID
      editingTransactionId = null;
    }
    
    function editTransaction(transactionId) {
      const transaction = transactions.find(t => t.id === transactionId);
      if (transaction) {
        openTransactionModal(transaction);
      }
    }
    
    function deleteTransaction(transactionId) {
      if (confirm('Are you sure you want to delete this transaction?')) {
        try {
          const transaction = transactions.find(t => t.id === transactionId);
          
          // If this is a sale transaction, restore the product quantity
          if (transaction && transaction.type === 'sale' && transaction.productId && transaction.quantity) {
            const product = products.find(p => p.id === transaction.productId);
            if (product) {
              product.quantity += transaction.quantity;
              saveProducts();
              loadProducts();
            }
          }
          
          transactions = transactions.filter(t => t.id !== transactionId);
          saveTransactions();
          loadTransactions();
          showNotification('Transaction deleted successfully!', 'success');
          
          // Refresh overview if it's active
          if (monthInitialized) {
            refreshOverview();
          }
        } catch (error) {
          console.error("Error deleting transaction:", error);
          showNotification('Error deleting transaction', 'error');
        }
      }
    }
    
    function closeModals() {
      productModal.classList.remove('show');
      transactionModal.classList.remove('show');
      receiptModal.classList.remove('show');
      editingProductId = null;
      editingTransactionId = null;
    }
    
    // Receipt Functions
    function generateReceipt(transactionData, product) {
      // Set receipt data
      const userData = JSON.parse(localStorage.getItem('sellSwiftUser') || '{}');
      receiptBusinessName.textContent = userData.businessName || "SELL SWIFT";
      
      // Format date
      const saleDate = new Date(transactionData.date);
      receiptDate.textContent = `Date: ${saleDate.toLocaleDateString()} ${saleDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
      
      // Generate receipt number
      const receiptNumber = `REC-${transactionData.id.slice(-6).toUpperCase()}`;
      receiptReceiptNo.textContent = `Receipt #: ${receiptNumber}`;
      
      // Set product details
      receiptProductName.textContent = product.name;
      receiptQuantity.textContent = transactionData.quantity;
      receiptUnitPrice.textContent = `RWF ${formatNumber(transactionData.unitPrice)}`;
      receiptSubtotal.textContent = `RWF ${formatNumber(transactionData.amount)}`;
      receiptTotal.textContent = `RWF ${formatNumber(transactionData.amount)}`;
      
      // Show receipt modal
      receiptModal.classList.add('show');
    }

    function printReceipt() {
      const printWindow = window.open('', '', 'width=400,height=600');
      const receiptHtml = `
        <html>
        <head>
          <title>Receipt - ${receiptBusinessName.textContent}</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              padding: 20px;
              margin: 0;
            }
            .receipt {
              width: 100%;
            }
            .receipt-header {
              text-align: center;
              margin-bottom: 20px;
              border-bottom: 1px solid #000;
              padding-bottom: 10px;
            }
            .receipt-header h3 {
              margin: 0;
              font-size: 18px;
            }
            .receipt-header p {
              margin: 5px 0;
              font-size: 12px;
            }
            .receipt-details {
              margin-bottom: 20px;
            }
            .receipt-item {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              font-size: 14px;
            }
            .receipt-total {
              border-top: 2px solid #000;
              padding-top: 10px;
              margin-top: 10px;
              font-weight: bold;
              display: flex;
              justify-content: space-between;
            }
            .receipt-footer {
              text-align: center;
              margin-top: 20px;
              font-size: 12px;
              border-top: 1px dashed #ccc;
              padding-top: 10px;
            }
            @media print {
              body {
                padding: 0;
              }
            }
          </style>
        </head>
        <body>
          <div class="receipt">
            <div class="receipt-header">
              <h3>${receiptBusinessName.textContent}</h3>
              <p>${receiptAddress.textContent}</p>
              <p>${receiptPhone.textContent}</p>
              <p>${receiptDate.textContent}</p>
              <p>${receiptReceiptNo.textContent}</p>
            </div>
            
            <div class="receipt-details">
              <div class="receipt-item">
                <span>Product:</span>
                <span>${receiptProductName.textContent}</span>
              </div>
              <div class="receipt-item">
                <span>Quantity:</span>
                <span>${receiptQuantity.textContent}</span>
              </div>
              <div class="receipt-item">
                <span>Unit Price:</span>
                <span>${receiptUnitPrice.textContent}</span>
              </div>
              <div class="receipt-item">
                <span>Subtotal:</span>
                <span>${receiptSubtotal.textContent}</span>
              </div>
              <div class="receipt-total">
                <span>TOTAL:</span>
                <span>${receiptTotal.textContent}</span>
              </div>
            </div>
            
            <div class="receipt-footer">
              <p>Thank you for your purchase!</p>
              <p>Please keep this receipt for your records</p>
            </div>
          </div>
          <script>
            window.onload = function() {
              window.print();
              setTimeout(function() {
                window.close();
              }, 1000);
            };
          <\/script>
        </body>
        </html>
      `;
      
      printWindow.document.write(receiptHtml);
      printWindow.document.close();
    }
    
    // Overview functionality
    function checkMonthInitialization() {
      // For now, we'll always show the dashboard if we have data
      if (products.length > 0 || transactions.length > 0) {
        monthInitialized = true;
        monthInitSection.style.display = 'none';
        dashboardContent.style.display = 'block';
        loadAnalyticsData();
      } else {
        monthInitialized = false;
        monthInitSection.style.display = 'block';
        dashboardContent.style.display = 'none';
      }
    }
    
    function initializeMonth() {
      startMonthBtn.style.display = 'none';
      initProgressSection.style.display = 'block';
      simulateProgress(0, "Checking business...", 800, () => {
        simulateProgress(30, "Initializing analytics...", 1000, () => {
          simulateProgress(60, "Setting up tracking...", 1100, () => {
            simulateProgress(90, "Finalizing...", 900, () => {
              progressFill.style.width = '100%';
              progressText.textContent = 'Month initialized successfully!';
              const currentDate = new Date();
              const monthYear = `${currentDate.getMonth() + 1}-${currentDate.getFullYear()}`;
              
              monthInitialized = true;
              monthInitSection.style.display = 'none';
              dashboardContent.style.display = 'block';
              loadAnalyticsData();
            });
          });
        });
      });
    }
    
    function simulateProgress(progress, text, delay, callback) {
      progressFill.style.width = `${progress}%`;
      progressText.textContent = text;
      setTimeout(() => {
        if (callback) callback();
      }, delay);
    }
    
    function refreshOverview() {
      showNotification('Refreshing business overview...', 'info');
      
      // Reload data from localStorage to ensure we have the latest
      loadProducts();
      loadTransactions();
      
      // Process analytics data
      loadAnalyticsData();
      
      // Show success message after a short delay
      setTimeout(() => {
        showNotification('Business overview updated successfully!', 'success');
      }, 500);
    }
    
    function loadAnalyticsData() {
      showLoading();
      
      // Process data for analytics
      analyticsData.products = products;
      
      // Get loans from transactions
      analyticsData.loans = transactions.filter(t => t.type === 'loan');
      
      // Get sales from transactions
      analyticsData.sales = transactions.filter(t => t.type === 'sale');
      
      // Set default time range to 30 days (since we removed the dropdown)
      analyticsData.timeRange = 30;
      
      processAnalyticsData();
      hideLoading();
    }
    
    function processAnalyticsData() {
      // Calculate revenue from sales transactions
      const totalRevenue = analyticsData.sales.reduce((sum, sale) => sum + (sale.amount || 0), 0);
      
      // Calculate total products sold
      const totalProductsSold = analyticsData.sales.reduce((sum, sale) => {
        return sum + (sale.quantity || 0);
      }, 0);
      
      // Calculate total cost and total profit
      let totalCost = 0;
      let totalProfit = 0;
      
      analyticsData.sales.forEach(sale => {
        if (sale.productId) {
          const product = analyticsData.products.find(p => p.id === sale.productId);
          if (product && product.costPrice) {
            // Calculate cost based on the number of items sold
            const cost = product.costPrice * (sale.quantity || 1);
            totalCost += cost;
            
            // Calculate profit for this sale
            const profit = sale.amount - cost;
            totalProfit += profit;
          }
        }
      });
      
      // Calculate expenses from expense transactions
      const expenses = transactions.filter(t => t.type === 'expense');
      const totalExpenses = expenses.reduce((sum, expense) => sum + (expense.amount || 0), 0);
      
      // Subtract expenses from profit
      totalProfit -= totalExpenses;
      
      const totalLoss = Math.max(0, -totalProfit);
      totalProfit = Math.max(0, totalProfit);
      
      // Calculate unsold products
      const unsoldProducts = analyticsData.products.reduce((sum, product) => {
        return sum + product.quantity;
      }, 0);
      
      // Calculate loans
      const activeLoans = analyticsData.loans.filter(loan => loan.status !== 'paid').length;
      const paidLoans = analyticsData.loans.filter(loan => loan.status === 'paid').length;
      
      // Update UI with calculated values
      totalRevenueElement.textContent = `RWF ${formatNumber(totalRevenue)}`;
      totalProfitElement.textContent = `RWF ${formatNumber(totalProfit)}`;
      totalLossElement.textContent = `RWF ${formatNumber(totalLoss)}`;
      soldProductsElement.textContent = formatNumber(totalProductsSold);
      unsoldProductsElement.textContent = formatNumber(unsoldProducts);
      activeLoansElement.textContent = formatNumber(activeLoans);
      paidLoansElement.textContent = formatNumber(paidLoans);
      
      // Calculate changes (for demo purposes, using random values)
      const revenueChange = (Math.random() * 20 - 5).toFixed(1);
      const profitChange = (Math.random() * 25 - 5).toFixed(1);
      const lossChange = (Math.random() * 10 - 3).toFixed(1);
      
      updateChangeIndicator(revenueChangeElement, revenueChange);
      updateChangeIndicator(profitChangeElement, profitChange);
      updateChangeIndicator(lossChangeElement, lossChange);
      
      generateRevenueChart();
      generateInsights(totalRevenue, totalProfit, totalLoss, totalProductsSold, unsoldProducts, activeLoans, paidLoans);
      generateProductPerformance();
    }
    
    function updateChangeIndicator(element, change) {
      const isPositive = parseFloat(change) >= 0;
      element.innerHTML = `${Math.abs(change)}% <i class="fas fa-caret-${isPositive ? 'up' : 'down'}"></i>`;
      element.className = `change ${isPositive ? 'positive' : 'negative'}`;
    }
    
    function generateRevenueChart() {
      const ctx = document.getElementById('revenueChart');
      if (!ctx) return;
      if (revenueChart) revenueChart.destroy();
      
      const days = analyticsData.timeRange;
      const labels = Array.from({length: days}, (_, i) => {
        const date = new Date();
        date.setDate(date.getDate() - (days - i - 1));
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      });
      
      // Generate realistic data based on actual transactions
      const earnedData = Array.from({length: days}, (_, i) => {
        const date = new Date();
        date.setDate(date.getDate() - (days - i - 1));
        const dateStr = date.toISOString().split('T')[0];
        
        // Sum sales for this date
        const daySales = analyticsData.sales.filter(sale => sale.date === dateStr);
        return daySales.reduce((sum, sale) => sum + (sale.amount || 0), 0);
      });
      
      const lostData = Array.from({length: days}, (_, i) => {
        const date = new Date();
        date.setDate(date.getDate() - (days - i - 1));
        const dateStr = date.toISOString().split('T')[0];
        
        // Sum expenses for this date
        const dayExpenses = transactions.filter(t => t.type === 'expense' && t.date === dateStr);
        return dayExpenses.reduce((sum, expense) => sum + (expense.amount || 0), 0);
      });
      
      revenueChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [
            {
              label: 'Earned',
              data: earnedData,
              backgroundColor: '#4caf50',
              order: 2
            },
            {
              label: 'Lost',
              data: lostData,
              backgroundColor: '#f44336',
              order: 1
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `${context.dataset.label}: RWF ${formatNumber(context.raw)}`;
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  if (value >= 1000000) return 'RWF ' + (value/1000000).toFixed(1) + 'M';
                  if (value >= 1000) return 'RWF ' + (value/1000).toFixed(0) + 'K';
                  return 'RWF ' + value;
                }
              }
            }
          }
        }
      });
    }
    
    function generateInsights(revenue, profit, loss, productsSold, unsoldProducts, activeLoans, paidLoans) {
      insightsContainer.innerHTML = '';
      
      if (revenue === 0 && productsSold === 0) {
        const insightElement = document.createElement('div');
        insightElement.className = 'insight-card insight-warning animate';
        insightElement.innerHTML = `
          <h4><i class="fas fa-exclamation-triangle"></i> Insufficient Data</h4>
          <p>We need more business data to generate meaningful insights. Continue using SELL SWIFT to track sales, products, and loans for personalized recommendations.</p>
        `;
        insightsContainer.appendChild(insightElement);
        return;
      }
      
      const insights = [];
      
      if (revenue > 500000) {
        insights.push({
          type: 'positive',
          title: 'High Revenue Achievement',
          message: `Your revenue of RWF ${formatNumber(revenue)} is excellent! You're among the top-performing businesses in your category.`
        });
      } else if (revenue > 100000) {
        insights.push({
          type: 'positive',
          title: 'Good Revenue Performance',
          message: `Your revenue of RWF ${formatNumber(revenue)} is solid. Consider expanding your product range to increase earnings.`
        });
      } else {
        insights.push({
          type: 'warning',
          title: 'Revenue Needs Improvement',
          message: `Your revenue of RWF ${formatNumber(revenue)} could be better. Try marketing strategies to attract more customers.`
        });
      }
      
      if (profit > loss) {
        insights.push({
          type: 'positive',
          title: 'Profitable Operation',
          message: `Your business is generating a healthy profit of RWF ${formatNumber(profit)}. Keep up the good work!`
        });
      } else if (loss > profit) {
        insights.push({
          type: 'critical',
          title: 'Loss-Making Operation',
          message: `Your business is currently operating at a loss of RWF ${formatNumber(loss)}. Consider reviewing your costs and pricing.`
        });
      }
      
      if (unsoldProducts > 50) {
        insights.push({
          type: 'warning',
          title: 'Excess Inventory',
          message: `You have ${unsoldProducts} unsold products. Consider running promotions to clear inventory and free up capital.`
        });
      } else if (unsoldProducts < 10) {
        insights.push({
          type: 'positive',
          title: 'Efficient Inventory Management',
          message: `You have only ${unsoldProducts} unsold products. Your inventory management is efficient!`
        });
      }
      
      if (productsSold > 0) {
        insights.push({
          type: 'positive',
          title: 'Sales Performance',
          message: `You've sold ${productsSold} products. ${productsSold > 50 ? 'Excellent sales volume!' : 'Good start! Try to increase your sales volume.'}`
        });
      }
      
      if (activeLoans > 0) {
        insights.push({
          type: 'warning',
          title: 'Active Loans Outstanding',
          message: `You have ${activeLoans} active loans. Ensure timely collection to maintain cash flow.`
        });
      }
      
      if (paidLoans > 0) {
        insights.push({
          type: 'positive',
          title: 'Successful Loan Recovery',
          message: `You've successfully recovered ${paidLoans} loans. Good financial management!`
        });
      }
      
      insights.push({
        type: 'positive',
        title: 'Growth Opportunity',
        message: 'Based on your business pattern, you could increase revenue by 15-20% by expanding your product range in the most popular categories.'
      });
      
      insights.forEach((insight, index) => {
        const insightElement = document.createElement('div');
        insightElement.className = `insight-card insight-${insight.type} animate`;
        insightElement.style.animationDelay = `${0.7 + index * 0.1}s`;
        insightElement.innerHTML = `
          <h4><i class="fas fa-${insight.type === 'positive' ? 'check-circle' : insight.type === 'warning' ? 'exclamation-triangle' : 'exclamation-circle'}"></i> ${insight.title}</h4>
          <p>${insight.message}</p>
        `;
        insightsContainer.appendChild(insightElement);
      });
    }
    
    function generateProductPerformance() {
      productPerformanceBody.innerHTML = '';
      
      const products = analyticsData.products.slice(0, 5).map(product => {
        const sales = analyticsData.sales.filter(sale => sale.productId === product.id);
        const unitsSold = sales.reduce((sum, sale) => {
          return sum + (sale.quantity || 0);
        }, 0);
        const revenue = sales.reduce((sum, sale) => sum + (sale.amount || 0), 0);
        const cost = product.costPrice ? product.costPrice * unitsSold : 0;
        const profit = revenue - cost;
        const margin = revenue > 0 ? (profit / revenue) * 100 : 0;
        
        return {
          name: product.name,
          unitsSold,
          revenue,
          cost,
          profit,
          margin
        };
      });
      
      if (products.length === 0) {
        productPerformanceBody.innerHTML = `
          <tr>
            <td colspan="6" style="text-align: center;">No product data available yet</td>
          </tr>
        `;
        return;
      }
      
      products.forEach((product, index) => {
        const row = document.createElement('tr');
        row.style.opacity = '0';
        row.style.transform = 'translateY(10px)';
        row.style.animation = `fadeInUp 0.5s ease ${index * 0.1}s forwards`;
        
        row.innerHTML = `
          <td>${product.name}</td>
          <td>${formatNumber(product.unitsSold)}</td>
          <td>RWF ${formatNumber(product.revenue)}</td>
          <td>RWF ${formatNumber(product.cost)}</td>
          <td class="${product.profit >= 0 ? 'profit-positive' : 'profit-negative'}">RWF ${formatNumber(product.profit)}</td>
          <td>${product.margin.toFixed(1)}%</td>
        `;
        productPerformanceBody.appendChild(row);
      });
    }
    
    function showLoading() {
      const chartWrappers = document.querySelectorAll('.chart-wrapper');
      chartWrappers.forEach(wrapper => {
        if (!wrapper.querySelector('.loading-spinner')) {
          wrapper.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
        }
      });
      
      if (insightsContainer && !insightsContainer.querySelector('.loading-spinner')) {
        insightsContainer.innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
      }
    }
    
    function hideLoading() {
      const chartWrappers = document.querySelectorAll('.chart-wrapper');
      chartWrappers.forEach(wrapper => {
        wrapper.innerHTML = '<canvas></canvas>';
      });
    }
    
    function animateDashboardElements() {
      // Animate summary cards
      document.querySelectorAll('.summary-card').forEach(card => {
        card.classList.add('animate');
      });
      
      // Animate split boxes
      document.querySelectorAll('.split-box').forEach(box => {
        box.classList.add('animate');
      });
      
      // Animate chart container
      const chartContainer = document.querySelector('.chart-container');
      if (chartContainer) {
        chartContainer.classList.add('animate');
      }
      
      // Animate insights
      const insights = document.querySelector('.insights');
      if (insights) {
        insights.classList.add('animate');
      }
      
      // Animate product performance
      const productPerformance = document.querySelector('.product-performance');
      if (productPerformance) {
        productPerformance.classList.add('animate');
      }
    }
    
    function formatNumber(num) {
      return new Intl.NumberFormat('en-US').format(Math.round(num));
    }
    
    function getMonthName(monthIndex) {
      const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                     'July', 'August', 'September', 'October', 'November', 'December'];
      return months[monthIndex];
    }
  </script>

  <!-- Particle.js for background effects -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    // Initialize particles.js for the login page background
    document.addEventListener('DOMContentLoaded', function() {
      if (document.getElementById('particles-js')) {
        particlesJS('particles-js', {
          particles: {
            number: {
              value: 80,
              density: {
                enable: true,
                value_area: 800
              }
            },
            color: {
              value: "#ffffff"
            },
            shape: {
              type: "circle",
              stroke: {
                width: 0,
                color: "#000000"
              }
            },
            opacity: {
              value: 0.5,
              random: true,
              anim: {
                enable: true,
                speed: 1,
                opacity_min: 0.1,
                sync: false
              }
            },
            size: {
              value: 3,
              random: true,
              anim: {
                enable: true,
                speed: 2,
                size_min: 0.1,
                sync: false
              }
            },
            line_linked: {
              enable: true,
              distance: 150,
              color: "#ffffff",
              opacity: 0.4,
              width: 1
            },
            move: {
              enable: true,
              speed: 1,
              direction: "none",
              random: true,
              straight: false,
              out_mode: "out",
              bounce: false,
              attract: {
                enable: false,
                rotateX: 600,
                rotateY: 1200
              }
            }
          },
          interactivity: {
            detect_on: "canvas",
            events: {
              onhover: {
                enable: true,
                mode: "grab"
              },
              onclick: {
                enable: true,
                mode: "push"
              },
              resize: true
            },
            modes: {
              grab: {
                distance: 140,
                line_linked: {
                  opacity: 1
                }
              },
              push: {
                particles_nb: 4
              }
            }
          },
          retina_detect: true
        });
      }
    });
  </script>
</body>
</html>
